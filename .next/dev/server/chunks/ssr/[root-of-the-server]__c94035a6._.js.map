{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 94, "column": 0}, "map": {"version":3,"sources":["file:///D:/yemendrama/yemendrama/lib/api.ts"],"sourcesContent":["import axios from \"axios\";\r\n\r\nconst api = axios.create({\r\n  baseURL: process.env.NEXT_PUBLIC_API_URL,\r\n  headers: {\r\n    Accept: \"application/json\",\r\n  },\r\n  withCredentials: false, // JWT فقط\r\n});\r\n\r\napi.interceptors.request.use((config) => {\r\n  if (typeof window !== \"undefined\") {\r\n    const token = localStorage.getItem(\"token\");\r\n    if (token) {\r\n      config.headers.Authorization = `Bearer ${token}`;\r\n    }\r\n  }\r\n  return config;\r\n});\r\n\r\nexport default api;\r\n"],"names":[],"mappings":";;;;AAAA;;AAEA,MAAM,MAAM,gJAAK,CAAC,MAAM,CAAC;IACvB,OAAO;IACP,SAAS;QACP,QAAQ;IACV;IACA,iBAAiB;AACnB;AAEA,IAAI,YAAY,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC;IAC5B;;IAMA,OAAO;AACT;uCAEe"}},
    {"offset": {"line": 117, "column": 0}, "map": {"version":3,"sources":["file:///D:/yemendrama/yemendrama/services/auth.service.ts"],"sourcesContent":["import api from \"@/lib/api\";\r\n\r\nexport const loginRequest = async (email: string, password: string) => {\r\n  const res = await api.post(\"/login\", { email, password });\r\n  return res.data;\r\n};\r\n\r\nexport const getMe = async () => {\r\n  return api.get(\"/me\");\r\n};\r\n\r\nexport const logoutRequest = async () => {\r\n  return api.post(\"/logout\");\r\n};\r\n"],"names":[],"mappings":";;;;;;;;AAAA;;AAEO,MAAM,eAAe,OAAO,OAAe;IAChD,MAAM,MAAM,MAAM,qHAAG,CAAC,IAAI,CAAC,UAAU;QAAE;QAAO;IAAS;IACvD,OAAO,IAAI,IAAI;AACjB;AAEO,MAAM,QAAQ;IACnB,OAAO,qHAAG,CAAC,GAAG,CAAC;AACjB;AAEO,MAAM,gBAAgB;IAC3B,OAAO,qHAAG,CAAC,IAAI,CAAC;AAClB"}},
    {"offset": {"line": 144, "column": 0}, "map": {"version":3,"sources":["file:///D:/yemendrama/yemendrama/context/AuthContext.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { createContext, useContext, useEffect, useState } from \"react\";\r\nimport { getMe, logoutRequest } from \"@/services/auth.service\";\r\n\r\ntype AuthContextType = {\r\n  user: any;\r\n  loading: boolean;\r\n  logout: () => void;\r\n};\r\n\r\nconst AuthContext = createContext<AuthContextType | null>(null);\r\n\r\nexport function useAuth() {\r\n  return useContext(AuthContext)!;\r\n}\r\n\r\nexport const AuthProvider = ({ children }: { children: React.ReactNode }) => {\r\n  const [user, setUser] = useState<any>(null);\r\n  const [loading, setLoading] = useState(true);\r\n\r\n  // ✅ فحص الجلسة مرة واحدة فقط\r\n  useEffect(() => {\r\n    const token = localStorage.getItem(\"token\");\r\n\r\n    if (!token) {\r\n      setLoading(false);\r\n      return;\r\n    }\r\n\r\n    getMe()\r\n      .then((res) => setUser(res.data))\r\n      .catch(() => {\r\n        localStorage.removeItem(\"token\");\r\n        setUser(null);\r\n      })\r\n      .finally(() => setLoading(false));\r\n  }, []);\r\n\r\n  const logout = async () => {\r\n    try {\r\n      await logoutRequest();\r\n    } catch {}\r\n    localStorage.removeItem(\"token\");\r\n    setUser(null);\r\n  };\r\n\r\n  return (\r\n    <AuthContext.Provider value={{ user, loading, logout }}>\r\n      {children}\r\n    </AuthContext.Provider>\r\n  );\r\n};\r\n"],"names":[],"mappings":";;;;;;;AAEA;AACA;AAHA;;;;AAWA,MAAM,4BAAc,IAAA,sNAAa,EAAyB;AAEnD,SAAS;IACd,OAAO,IAAA,mNAAU,EAAC;AACpB;AAEO,MAAM,eAAe,CAAC,EAAE,QAAQ,EAAiC;IACtE,MAAM,CAAC,MAAM,QAAQ,GAAG,IAAA,iNAAQ,EAAM;IACtC,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,iNAAQ,EAAC;IAEvC,6BAA6B;IAC7B,IAAA,kNAAS,EAAC;QACR,MAAM,QAAQ,aAAa,OAAO,CAAC;QAEnC,IAAI,CAAC,OAAO;YACV,WAAW;YACX;QACF;QAEA,IAAA,oIAAK,IACF,IAAI,CAAC,CAAC,MAAQ,QAAQ,IAAI,IAAI,GAC9B,KAAK,CAAC;YACL,aAAa,UAAU,CAAC;YACxB,QAAQ;QACV,GACC,OAAO,CAAC,IAAM,WAAW;IAC9B,GAAG,EAAE;IAEL,MAAM,SAAS;QACb,IAAI;YACF,MAAM,IAAA,4IAAa;QACrB,EAAE,OAAM,CAAC;QACT,aAAa,UAAU,CAAC;QACxB,QAAQ;IACV;IAEA,qBACE,8OAAC,YAAY,QAAQ;QAAC,OAAO;YAAE;YAAM;YAAS;QAAO;kBAClD;;;;;;AAGP"}}]
}