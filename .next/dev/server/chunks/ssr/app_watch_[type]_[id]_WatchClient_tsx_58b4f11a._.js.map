{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///D:/yemendrama/yemendrama/app/watch/%5Btype%5D/%5Bid%5D/WatchClient.tsx"],"sourcesContent":["'use client';\r\n\r\nimport { useState, useEffect, useMemo } from \"react\";\r\nimport { useRouter } from \"next/navigation\";\r\nimport { Content, Episode } from \"@/types/content\";\r\n\r\ninterface WatchClientProps {\r\n  show: Content;\r\n  type: string;\r\n}\r\n\r\nexport default function WatchClient({ show, type }: WatchClientProps) {\r\n  const router = useRouter();\r\n  const backendUrl = \"http://localhost:8000\";\r\n\r\n  // ÿ¨ŸÖÿπ ŸÉŸÑ ÿßŸÑÿ≠ŸÑŸÇÿßÿ™\r\n  const allEpisodes: Episode[] = useMemo(() => {\r\n    const directEpisodes = show.episodes || [];\r\n    const seasonEpisodes =\r\n      show.seasons?.flatMap((season: { episodes: any }) => season.episodes) || [];\r\n    return [...directEpisodes, ...seasonEpisodes];\r\n  }, [show]);\r\n\r\n  const [currentEpisode, setCurrentEpisode] = useState<Episode | null>(\r\n    allEpisodes[0] || null\r\n  );\r\n\r\n  // ÿ¨ŸÑÿ® ŸÉŸÑ ÿßŸÑÿ£ÿπŸÖÿßŸÑ ŸÖŸÜ ŸÜŸÅÿ≥ ÿßŸÑŸÜŸàÿπ ÿßŸÑÿØŸÇŸäŸÇ\r\n  const [similarWorks, setSimilarWorks] = useState<Content[]>([]);\r\n\r\n  useEffect(() => {\r\n    fetch(`${backendUrl}/api/v1/contents?type=${type}&limit=20`)\r\n      .then(res => res.json())\r\n      .then(data => {\r\n        // ŸÅŸÑÿ™ÿ±ÿ© ÿßŸÑÿ£ÿπŸÖÿßŸÑ ÿßŸÑÿ™Ÿä ÿ™ÿ∑ÿßÿ®ŸÇ ŸÜŸàÿπ ÿßŸÑÿπŸÖŸÑ ÿßŸÑŸÅÿπŸÑŸä ŸÅŸÇÿ∑\r\n        const filtered = data.data.filter(\r\n          (item: Content) =>\r\n            item.uuid !== show.uuid && item.type === show.type\r\n        );\r\n        setSimilarWorks(filtered);\r\n      })\r\n      .catch(err => console.error(err));\r\n  }, [type, show.uuid, show.type]);\r\n\r\n  // ÿ≠ÿ≥ÿßÿ® ÿπÿØÿØ ÿßŸÑÿ≠ŸÑŸÇÿßÿ™\r\n  const totalEpisodes =\r\n    show.seasons?.reduce(\r\n      (total: number, season: any) => total + (season.episodes?.length || 0),\r\n      0\r\n    ) || show.episodes?.length || 0;\r\n\r\n  return (\r\n    <main className=\"bg-gray-900 min-h-screen text-white mx-auto px-4 py-6\">\r\n\r\n      {/* ŸÖÿ¥ÿ∫ŸÑ ÿßŸÑŸÅŸäÿØŸäŸà */}\r\n      {currentEpisode ? (\r\n        <section className=\"mb-6 relative aspect-video rounded-lg overflow-hidden shadow-lg\">\r\n          <iframe\r\n            src={currentEpisode.video_url || currentEpisode.videoEmbedUrl}\r\n            title={currentEpisode.title}\r\n            allowFullScreen\r\n            className=\"w-full h-full\"\r\n          />\r\n          <div className=\"absolute bottom-2 left-2 bg-black/60 px-3 py-1 rounded text-sm\">\r\n            {currentEpisode.title}\r\n          </div>\r\n        </section>\r\n      ) : (\r\n        <p className=\"text-gray-300 text-center mt-20\">ÿßŸÑŸÅŸäÿØŸäŸà ÿ∫Ÿäÿ± ŸÖÿ™ÿßÿ≠</p>\r\n      )}\r\n\r\n      {/* ŸÖÿπŸÑŸàŸÖÿßÿ™ ÿßŸÑŸÖÿ≠ÿ™ŸàŸâ */}\r\n      <section className=\"flex flex-col lg:flex-row gap-8\">\r\n        <article className=\"flex-1\">\r\n          <h1 className=\"text-3xl font-bold mb-2\">{show.title}</h1>\r\n          <div className=\"flex flex-wrap gap-4 text-sm text-gray-300 mb-3\">\r\n            <span>‚≠ê {show.rating ?? \"ÿ∫Ÿäÿ± ŸÖÿ™ŸàŸÅÿ±\"}</span>\r\n            <span>üé¨ {show.categories?.map(c => c.name).join(\", \")}</span>\r\n            <span>üìÖ {show.year}</span>\r\n            {show.seasons_count && <span>ÿßŸÑŸÖŸàÿßÿ≥ŸÖ: {show.seasons_count}</span>}\r\n          </div>\r\n          <p className=\"text-gray-400 mb-12\">{show.description}</p>\r\n\r\n          {/* ŸÇÿßÿ¶ŸÖÿ© ÿßŸÑÿ≠ŸÑŸÇÿßÿ™ */}\r\n          {allEpisodes.length > 0 && (\r\n            <aside className=\"bg-gray-800 rounded-lg p-4 shadow-lg mb-6\">\r\n              <h2 className=\"text-xl font-semibold mb-4\">ÿßŸÑÿ≠ŸÑŸÇÿßÿ™</h2>\r\n              <ul className=\"space-y-3 max-h-[250px] overflow-y-auto\">\r\n                {allEpisodes.map(ep => (\r\n                  <li\r\n                    key={ep.id}\r\n                    onClick={() => setCurrentEpisode(ep)}\r\n                    className={`flex items-center gap-3 p-3 rounded cursor-pointer transition\r\n                      ${currentEpisode?.id === ep.id ? \"bg-red-700\" : \"bg-gray-700 hover:bg-red-600\"}`}\r\n                  >\r\n                    <img\r\n                      src={ep.thumbnail || show.poster_image}\r\n                      alt={ep.title}\r\n                      className=\"w-20 h-12 rounded object-cover flex-shrink-0\"\r\n                    />\r\n                    <div>\r\n                      <h3 className=\"font-semibold\">{ep.title}</h3>\r\n                      <p className=\"text-xs text-gray-300\">{ep.duration || \"ÿ∫Ÿäÿ± ŸÖÿ≠ÿØÿØÿ©\"}</p>\r\n                    </div>\r\n                  </li>\r\n                ))}\r\n              </ul>\r\n            </aside>\r\n          )}\r\n        </article>\r\n\r\n        {/* ÿ£ÿπŸÖÿßŸÑ ŸÖÿ¥ÿßÿ®Ÿáÿ© */}\r\n        <div className=\"flex flex-col lg:w-[600px] gap-6\">\r\n          <aside className=\"bg-gray-800 rounded-lg p-4 shadow-lg\">\r\n            <h2 className=\"text-xl font-semibold mb-4\">\r\n              {show.type === \"movie\"\r\n                ? \"ÿ£ŸÅŸÑÿßŸÖ ÿ£ÿÆÿ±Ÿâ\"\r\n                : show.type === \"series\"\r\n                ? \"ŸÖÿ≥ŸÑÿ≥ŸÑÿßÿ™ ÿ£ÿÆÿ±Ÿâ\"\r\n                : show.type === \"program\"\r\n                ? \"ÿ®ÿ±ÿßŸÖÿ¨ ÿ£ÿÆÿ±Ÿâ\"\r\n                : \"ŸÖÿ≠ÿ™ŸàŸâ ŸÖÿ¥ÿßÿ®Ÿá\"}\r\n            </h2>\r\n\r\n            {similarWorks.length > 0 ? (\r\n              <ul className=\"space-y-3 max-h-[600px] overflow-y-auto\">\r\n                {similarWorks.map(item => (\r\n                  <li\r\n                    key={item.uuid}\r\n                    onClick={() => router.push(`/watch/${type}/${item.uuid}`)}\r\n                    className=\"flex items-center gap-3 p-3 rounded cursor-pointer transition bg-gray-700 hover:bg-red-600\"\r\n                  >\r\n                    <img\r\n                      src={`${backendUrl}${item.card_image || item.poster_image || \"/images/default-show.jpg\"}`}\r\n                      alt={item.title}\r\n                      className=\"w-20 h-12 rounded object-cover flex-shrink-0\"\r\n                    />\r\n                    <div>\r\n                      <h3 className=\"font-semibold\">{item.title}</h3>\r\n                      <p className=\"text-xs text-gray-300\">\r\n                        {item.categories?.map(c => c.name).join(\", \")} ‚Ä¢ {item.year}\r\n                      </p>\r\n                    </div>\r\n                  </li>\r\n                ))}\r\n              </ul>\r\n            ) : (\r\n              <p className=\"text-gray-400 text-sm\">ŸÑÿß ÿ™Ÿàÿ¨ÿØ ÿ£ÿπŸÖÿßŸÑ ŸÖÿ¥ÿßÿ®Ÿáÿ© ÿ≠ÿßŸÑŸäÿß</p>\r\n            )}\r\n          </aside>\r\n        </div>\r\n      </section>\r\n    </main>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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"}}]
}