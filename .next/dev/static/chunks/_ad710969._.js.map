{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///D:/yemendrama/yemendrama/lib/api.ts"],"sourcesContent":["import axios from 'axios';\r\n\r\nconst api = axios.create({\r\n  baseURL: process.env.NEXT_PUBLIC_API_URL,\r\n  headers: {\r\n    Accept: 'application/json',\r\n  },\r\n  withCredentials: false, // ðŸš€ Ù„Ø§ Ù†Ø±Ø³Ù„ cookies\r\n});\r\n\r\n// Ø¥Ø¶Ø§ÙØ© Ø§Ù„ØªÙˆÙƒÙ† ØªÙ„Ù‚Ø§Ø¦ÙŠÙ‹Ø§ Ù„Ø£ÙŠ Ø·Ù„Ø¨\r\napi.interceptors.request.use((config) => {\r\n  if (typeof window !== 'undefined') {\r\n    const token = localStorage.getItem('token');\r\n    if (token) {\r\n      config.headers.Authorization = `Bearer ${token}`;\r\n    }\r\n  }\r\n  return config;\r\n});\r\n\r\nexport default api;\r\n"],"names":[],"mappings":";;;;AAGW;AAHX;;AAEA,MAAM,MAAM,mJAAK,CAAC,MAAM,CAAC;IACvB,OAAO;IACP,SAAS;QACP,QAAQ;IACV;IACA,iBAAiB;AACnB;AAEA,gCAAgC;AAChC,IAAI,YAAY,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC;IAC5B,wCAAmC;QACjC,MAAM,QAAQ,aAAa,OAAO,CAAC;QACnC,IAAI,OAAO;YACT,OAAO,OAAO,CAAC,aAAa,GAAG,CAAC,OAAO,EAAE,OAAO;QAClD;IACF;IACA,OAAO;AACT;uCAEe"}},
    {"offset": {"line": 36, "column": 0}, "map": {"version":3,"sources":["file:///D:/yemendrama/yemendrama/services/auth.service.ts"],"sourcesContent":["import api from '@/lib/api';\r\n\r\nexport const loginRequest = async (email: string, password: string) => {\r\n  const res = await api.post('/login', { email, password });\r\n  return res.data; // ÙŠØ¬Ø¨ Ø£Ù† ÙŠØ±Ø¬Ø¹: { token: string, user: { ... } }\r\n};\r\n\r\nexport const getMe = async () => {\r\n  const res = await api.get('/me');\r\n  return res.data; // ØªØ£ÙƒØ¯ Ø£Ù† API ÙŠØ±Ø¬Ø¹ user object\r\n};\r\n\r\nexport const logoutRequest = async () => {\r\n  const res = await api.post('/logout');\r\n  return res.data;\r\n};\r\n\r\nexport const registerRequest = async (\r\n  name: string,\r\n  email: string,\r\n  password: string,\r\n  password_confirmation: string\r\n) => {\r\n  const res = await api.post('/register', {\r\n    name,\r\n    email,\r\n    password,\r\n    password_confirmation,\r\n  });\r\n\r\n  return res.data;\r\n};\r\n"],"names":[],"mappings":";;;;;;;;;;AAAA;;AAEO,MAAM,eAAe,OAAO,OAAe;IAChD,MAAM,MAAM,MAAM,wHAAG,CAAC,IAAI,CAAC,UAAU;QAAE;QAAO;IAAS;IACvD,OAAO,IAAI,IAAI,EAAE,gDAAgD;AACnE;AAEO,MAAM,QAAQ;IACnB,MAAM,MAAM,MAAM,wHAAG,CAAC,GAAG,CAAC;IAC1B,OAAO,IAAI,IAAI,EAAE,+BAA+B;AAClD;AAEO,MAAM,gBAAgB;IAC3B,MAAM,MAAM,MAAM,wHAAG,CAAC,IAAI,CAAC;IAC3B,OAAO,IAAI,IAAI;AACjB;AAEO,MAAM,kBAAkB,OAC7B,MACA,OACA,UACA;IAEA,MAAM,MAAM,MAAM,wHAAG,CAAC,IAAI,CAAC,aAAa;QACtC;QACA;QACA;QACA;IACF;IAEA,OAAO,IAAI,IAAI;AACjB"}},
    {"offset": {"line": 79, "column": 0}, "map": {"version":3,"sources":["file:///D:/yemendrama/yemendrama/context/AuthContext.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { createContext, useContext, useEffect, useState } from \"react\";\r\nimport {\r\n  loginRequest,\r\n  getMe,\r\n  logoutRequest,\r\n  registerRequest,\r\n} from \"@/services/auth.service\";\r\nimport { useRouter } from \"next/navigation\";\r\n\r\ninterface AuthContextType {\r\n  user: any;\r\n  loading: boolean;\r\n\r\n  login: (email: string, password: string) => Promise<void>;\r\n  register: (\r\n    name: string,\r\n    email: string,\r\n    password: string,\r\n    password_confirmation: string\r\n  ) => Promise<void>;\r\n  logout: () => Promise<void>;\r\n}\r\n\r\nconst AuthContext = createContext<AuthContextType | null>(null);\r\n\r\nexport const AuthProvider = ({ children }: { children: React.ReactNode }) => {\r\n  const [user, setUser] = useState<any>(null);\r\n  const [loading, setLoading] = useState(true);\r\n  const router = useRouter();\r\n\r\n  // ðŸ”¹ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø¹Ù†Ø¯ Ø§Ù„Ø±ÙŠÙØ±Ø´\r\n  useEffect(() => {\r\n    const token = localStorage.getItem(\"token\");\r\n\r\n    if (!token) {\r\n      setLoading(false);\r\n      return;\r\n    }\r\n\r\n    getMe()\r\n      .then((res) => {\r\n        setUser(res.user);\r\n      })\r\n      .catch(() => {\r\n        localStorage.removeItem(\"token\");\r\n        setUser(null);\r\n      })\r\n      .finally(() => setLoading(false));\r\n  }, []);\r\n\r\n  // ðŸ”¹ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„\r\n  const login = async (email: string, password: string) => {\r\n    setLoading(true);\r\n    try {\r\n      const res = await loginRequest(email, password);\r\n\r\n      localStorage.setItem(\"token\", res.token);\r\n      setUser(res.user);\r\n\r\n      const roles = res.roles || [];\r\n      if (roles.includes(\"admin\")) router.push(\"/admin\");\r\n      else router.push(\"/profile\");\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  // ðŸ”¹ Ø¥Ù†Ø´Ø§Ø¡ Ø­Ø³Ø§Ø¨\r\n  const register = async (\r\n    name: string,\r\n    email: string,\r\n    password: string,\r\n    password_confirmation: string\r\n  ) => {\r\n    setLoading(true);\r\n    try {\r\n      const res = await registerRequest(\r\n        name,\r\n        email,\r\n        password,\r\n        password_confirmation\r\n      );\r\n\r\n      localStorage.setItem(\"token\", res.token);\r\n      setUser(res.user);\r\n\r\n      router.push(\"/profile\");\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  // ðŸ”¹ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬\r\n  const logout = async () => {\r\n    try {\r\n      await logoutRequest();\r\n    } catch {}\r\n    localStorage.removeItem(\"token\");\r\n    setUser(null);\r\n    router.push(\"/login\");\r\n  };\r\n\r\n  return (\r\n    <AuthContext.Provider\r\n      value={{ user, login, register, logout, loading }}\r\n    >\r\n      {children}\r\n    </AuthContext.Provider>\r\n  );\r\n};\r\n\r\n// ðŸ”¹ Hook\r\nexport const useAuth = () => {\r\n  const context = useContext(AuthContext);\r\n  if (!context) {\r\n    throw new Error(\"useAuth must be used within AuthProvider\");\r\n  }\r\n  return context;\r\n};\r\n"],"names":[],"mappings":";;;;;;;AAEA;AACA;AAMA;;;AATA;;;;AAyBA,MAAM,4BAAc,IAAA,8KAAa,EAAyB;AAEnD,MAAM,eAAe,CAAC,EAAE,QAAQ,EAAiC;;IACtE,MAAM,CAAC,MAAM,QAAQ,GAAG,IAAA,yKAAQ,EAAM;IACtC,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,yKAAQ,EAAC;IACvC,MAAM,SAAS,IAAA,kJAAS;IAExB,gCAAgC;IAChC,IAAA,0KAAS;kCAAC;YACR,MAAM,QAAQ,aAAa,OAAO,CAAC;YAEnC,IAAI,CAAC,OAAO;gBACV,WAAW;gBACX;YACF;YAEA,IAAA,uIAAK,IACF,IAAI;0CAAC,CAAC;oBACL,QAAQ,IAAI,IAAI;gBAClB;yCACC,KAAK;0CAAC;oBACL,aAAa,UAAU,CAAC;oBACxB,QAAQ;gBACV;yCACC,OAAO;0CAAC,IAAM,WAAW;;QAC9B;iCAAG,EAAE;IAEL,kBAAkB;IAClB,MAAM,QAAQ,OAAO,OAAe;QAClC,WAAW;QACX,IAAI;YACF,MAAM,MAAM,MAAM,IAAA,8IAAY,EAAC,OAAO;YAEtC,aAAa,OAAO,CAAC,SAAS,IAAI,KAAK;YACvC,QAAQ,IAAI,IAAI;YAEhB,MAAM,QAAQ,IAAI,KAAK,IAAI,EAAE;YAC7B,IAAI,MAAM,QAAQ,CAAC,UAAU,OAAO,IAAI,CAAC;iBACpC,OAAO,IAAI,CAAC;QACnB,SAAU;YACR,WAAW;QACb;IACF;IAEA,gBAAgB;IAChB,MAAM,WAAW,OACf,MACA,OACA,UACA;QAEA,WAAW;QACX,IAAI;YACF,MAAM,MAAM,MAAM,IAAA,iJAAe,EAC/B,MACA,OACA,UACA;YAGF,aAAa,OAAO,CAAC,SAAS,IAAI,KAAK;YACvC,QAAQ,IAAI,IAAI;YAEhB,OAAO,IAAI,CAAC;QACd,SAAU;YACR,WAAW;QACb;IACF;IAEA,kBAAkB;IAClB,MAAM,SAAS;QACb,IAAI;YACF,MAAM,IAAA,+IAAa;QACrB,EAAE,OAAM,CAAC;QACT,aAAa,UAAU,CAAC;QACxB,QAAQ;QACR,OAAO,IAAI,CAAC;IACd;IAEA,qBACE,6LAAC,YAAY,QAAQ;QACnB,OAAO;YAAE;YAAM;YAAO;YAAU;YAAQ;QAAQ;kBAE/C;;;;;;AAGP;GApFa;;QAGI,kJAAS;;;KAHb;AAuFN,MAAM,UAAU;;IACrB,MAAM,UAAU,IAAA,2KAAU,EAAC;IAC3B,IAAI,CAAC,SAAS;QACZ,MAAM,IAAI,MAAM;IAClB;IACA,OAAO;AACT;IANa"}}]
}